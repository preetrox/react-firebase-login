(this["webpackJsonpform-task"]=this["webpackJsonpform-task"]||[]).push([[0],{31:function(e,t,a){},40:function(e,t,a){e.exports=a(59)},45:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(14),c=a.n(r),o=(a(45),a(31),a(16)),i=a(12),m=a(34),u=a.n(m);function s(e){var t=e.clickHandler;return l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-12  text-center login-con"},l.a.createElement("button",{type:"button",className:"btn btn-primary p-4 ",onClick:t},"LogIn with Facebook")))}var d=a(39),E=a(63),p=a(62),f=a(27),h=a.n(f);a(55);h.a.initializeApp({apiKey:"AIzaSyAMSsMDqElf6DWMlmy1ZVZQNwhDmUf4M8w",authDomain:"react-signup-71e62.firebaseapp.com",databaseURL:"https://react-signup-71e62.firebaseio.com",projectId:"react-signup-71e62",storageBucket:"react-signup-71e62.appspot.com",messagingSenderId:"864195551081",appId:"1:864195551081:web:fc5c126dc256cc9d38a7f8"});var b=h.a.firestore(),y=new h.a.auth.FacebookAuthProvider;function g(e){var t=Object(n.useState)(e.employees),a=Object(i.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)(""),u=Object(i.a)(m,2),s=u[0],f=u[1],h=Object(n.useState)(!1),y=Object(i.a)(h,2),g=y[0],v=y[1],w=Object(n.useState)({}),N=Object(i.a)(w,2),j=N[0],O=N[1],k=Object(n.useState)(1),C=Object(i.a)(k,2),P=C[0],x=C[1];Object(n.useEffect)((function(){c(e.employees)}),[e.employees]);var S=function(e){var t=Object(o.a)({},j);t.photoURL=e,O(t)},F=function(e){var t=Object(o.a)({},j);"image"===e.target.id?function(e,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(e){console.log("Error: ",e)}}(e.target.files[0],S):(t[e.target.id]=e.target.value,O(t))},U=function(e){if(P>=1&&P<=3){if("previous"===e)return P>1?x(P-1):"";"next"===e&&x(P+1)}},I=function(){f("Updating..."),b.collection("employees").doc(j.id).update(Object(o.a)({},j));var e=Object(d.a)(r),t=e.findIndex((function(e){return e.id===j.id}));e[t]=Object(o.a)({},j),c(e),L(),f("Record has been updated successfully...")},L=function(){x(1),O({}),v(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"container-table100"},l.a.createElement("div",{className:"wrap-table100"},l.a.createElement("div",{className:"table100 ver1 m-b-110"},l.a.createElement("div",{className:"table100-head"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Avatar"),l.a.createElement("th",{scope:"col"},"First Name"),l.a.createElement("th",{scope:"col"},"Last Name"),l.a.createElement("th",{scope:"col"},"Salary"),l.a.createElement("th",{scope:"col"},"Phone"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Update"))),l.a.createElement("tbody",null,r.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("img",{src:e.photoURL,height:"100",width:"100",alt:"Facebook Profile Pic"})),l.a.createElement("td",null,e.firstName),l.a.createElement("td",null,e.lastName),l.a.createElement("td",null,e.salary),l.a.createElement("td",null,e.phone),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement("span",null,l.a.createElement("button",{type:"button",onClick:function(){return function(e){O(e),v(!0)}(e)},className:"btn btn-outline-primary btn-rounded btn-sm "},"EDIT"))))}))))))))),l.a.createElement(p.a,{show:g,onHide:L},l.a.createElement(p.a.Header,{closeButton:!0},l.a.createElement(p.a.Title,null,"Edit Employee")),l.a.createElement(p.a.Body,null,l.a.createElement("h2",null,s),1===P?l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"First Name:- "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",id:"firstName",onChange:function(e){return F(e)}}))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"Last Name:- "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",id:"lastName",onChange:function(e){return F(e)}}))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"Email :- "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",id:"email",onChange:function(e){return F(e)}}))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"Phone:- "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",id:"phone",onChange:function(e){return F(e)}}))),l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"Salary:- "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",id:"salary",onChange:function(e){return F(e)}})))))):2===P?l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("img",{src:j.photoURL,alt:"Profile Pic"}),l.a.createElement("input",{type:"file",id:"image",onChange:function(e){return F(e)}})," Upload Image"))))):3===P?l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},"Provide Password:- "),l.a.createElement("td",null,l.a.createElement("input",{type:"password",id:"password",onChange:function(e){return F(e)}})))))):void 0,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},1===P?l.a.createElement(E.a,{color:"Primary",onClick:function(){return U("next")}},"Next"):2===P?l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{color:"Primary",onClick:function(){return U("previous")}},"Previous"),l.a.createElement(E.a,{color:"Primary",onClick:function(){return U("next")}},"Next")):3===P?l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{color:"Primary",onClick:function(){return U("previous")}},"Previous"),l.a.createElement(E.a,{color:"Primary",onClick:function(){I()},disabled:"Wait while we are processing your request..."===s}," Update Details ")):void 0)),l.a.createElement(p.a.Footer,null,l.a.createElement(E.a,{variant:"secondary",onClick:L},"Close"))),l.a.createElement(p.a,{show:""!==s,onHide:function(){return f("")}},l.a.createElement(p.a.Header,{closeButton:!0},l.a.createElement(p.a.Title,null,"Success")),l.a.createElement(p.a.Body,null,l.a.createElement("h1",null,s)),l.a.createElement(p.a.Footer,null,l.a.createElement(E.a,{variant:"secondary",onClick:function(){return f("")}},"Close"))))}var v=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),m=Object(i.a)(c,2),d=m[0],E=m[1],p=Object(n.useState)({firstName:"",lastName:"",phone:"",salary:"",password:"",email:"",photoURL:"https://www.bsn.eu/wp-content/uploads/2016/12/user-icon-image-placeholder.jpg"}),f=Object(i.a)(p,2),h=(f[0],f[1]);function v(){return new Promise((function(e,t){var a=[];b.collection("employees").get().then((function(t){t.docs.forEach((function(e){var t=Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id});a.push(t)})),e(a)}))}))}return l.a.createElement("div",{className:"container"},a?l.a.createElement(g,{employees:d}):l.a.createElement(s,{clickHandler:function(){u.a.auth().signInWithPopup(y).then((function(e){v().then((function(t){if(-1===t.findIndex((function(t){return t.email===e.user.email}))){var a=e.user,n=a.displayName.split(" "),l={firstName:n[0],lastName:n[1],phone:a.phoneNumber?a.phoneNumber:"",salary:"",password:"",email:a.email,photoURL:a.photoURL};b.collection("employees").add(l),v().then((function(e){return E(e)})),h(l),r(!0)}else E(t),alert("User already exists in our database"),r(!0)})).catch((function(e){return console.error("Error while fetching employees ".concat(e))}))})).catch((function(e){e.code,e.message,e.email,e.credential}))}}))};var w=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.d2f883be.chunk.js.map